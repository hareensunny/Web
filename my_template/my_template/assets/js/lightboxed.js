!function(t,e,i,n){var o="Lightboxed",s="lightboxed--";function h(e,i){jQuery.extend(this,{Obj:e,_name:o,_defaults:t.fn.lightboxed.defaults,options:jQuery.extend({},t.fn.lightboxed.defaults,i),uniq:"id"+(new Date).getTime(),lightbox:{},cache:{},index:!1,touch:{},phantoms:{left:!1,right:!1}}),this.init()}function a(t){return{clientX:/touch/.test(t.type)?(t.originalEvent||t).changedTouches[0].clientX:t.clientX,clientY:/touch/.test(t.type)?(t.originalEvent||t).changedTouches[0].clientY:t.clientY,pageX:/touch/.test(t.type)?(t.originalEvent||t).changedTouches[0].pageX:t.pageX,pageY:/touch/.test(t.type)?(t.originalEvent||t).changedTouches[0].pageY:t.pageY,timestamp:Date.now()}}function r(t){(t=t||e.event).preventDefault&&t.preventDefault(),t.returnValue=!1}function l(t){if({37:1,38:1,39:1,40:1}[t.keyCode])return r(t),!1}t.extend(h.prototype,{init:function(){var t=this;this.CacheObj=jQuery(i).find("#lightboxed--cache").length>0?jQuery(i).find("#lightboxed--cache"):jQuery('<div id="lightboxed--cache" />').appendTo("body"),this.cache.container=jQuery('<div id="'+this.uniq+'" />').appendTo(this.CacheObj),this.cache.content=jQuery('<div class="lightboxed--cached_content" />').appendTo(this.cache.container),this.Obj.length>1&&(this.cache.thumbs=jQuery('<div class="lightboxed--cached_thumbs" />').appendTo(this.cache.container)),this.Obj.each(function(){t.addToCache(this)}),this.lightbox.container=jQuery(i).find("#lightboxed--container").length>0?jQuery(i).find("#lightboxed--container"):jQuery('<div id="lightboxed--container" />').addClass(this.options.lightboxCloseClass).appendTo("body"),this.lightbox.stage=this.lightbox.container.find("#lightboxed--stage").length>0?this.lightbox.container.find("#lightboxed--stage"):jQuery('<div id="lightboxed--stage" />').appendTo(this.lightbox.container),this.lightbox.content=this.lightbox.stage.find("#lightboxed--content").length>0?this.lightbox.stage.find("#lightboxed--content"):jQuery('<div id="lightboxed--content" />').appendTo(this.lightbox.stage),this.lightbox.thumbs=this.lightbox.container.find("#lightboxed--thumbs").length>0?this.lightbox.container.find("#lightboxed--thumbs"):jQuery('<div id="lightboxed--thumbs" />').appendTo(this.lightbox.stage),this.lightbox.close=this.lightbox.container.find("#lightboxed--bttn_close").length>0?this.lightbox.container.find("#lightboxed--bttn_close"):jQuery('<div id="lightboxed--bttn_close" />').appendTo(this.lightbox.container),this.lightbox.prev=this.lightbox.container.find("#lightboxed--bttn_prev").length>0?this.lightbox.container.find("#lightboxed--bttn_prev"):jQuery('<div id="lightboxed--bttn_prev" />').appendTo(this.lightbox.container),this.lightbox.next=this.lightbox.container.find("#lightboxed--bttn_next").length>0?this.lightbox.container.find("#lightboxed--bttn_next"):jQuery('<div id="lightboxed--bttn_next" />').appendTo(this.lightbox.container),this.registerEvents("init")},addToCache:function(t){if((jQuery(t).attr("data-link")||jQuery(t).attr("href")||jQuery(t).attr("data-src")||jQuery(t).attr("src")).match("jpg|gif|png|JPG|GIF|PNG|JPEG|jpeg|svg|SVG|tif|TIF|bmp|BMP"))var e=jQuery("<img />").attr("src",jQuery(t).attr("data-link")||jQuery(t).attr("href")||jQuery(t).attr("src")).attr("alt",jQuery(t).attr("alt")).attr("data-caption",jQuery(t).attr("data-caption"));else if((jQuery(t).attr("data-link")||jQuery(t).attr("href")).match("^#")&&jQuery(jQuery(t).attr("data-link")||jQuery(t).attr("href")).length>0)e=jQuery(jQuery(t).attr("data-link")||jQuery(t).attr("href")).html();else e=jQuery("<iframe />").attr("src",jQuery(t).attr("data-link")||jQuery(t).attr("href")).attr("width",jQuery(t).attr("data-width")).attr("height",jQuery(t).attr("data-height")).attr("allowfullscreen","true");jQuery('<div class="lightboxed--frame" />').append(e).append(void 0!==jQuery(t).attr("data-caption")?jQuery('<div class="lightboxed--caption" />').html(jQuery(t).attr("data-caption")):"").appendTo(this.cache.content),this.Obj.length>1&&jQuery('<div class="lightboxed--thumb" />').append(jQuery('<div class="lightboxed--thumb_border" />').append(jQuery("<img />").attr("src",jQuery(t).attr("data-src")||jQuery(t).attr("src")||jQuery(t).attr("data-link")||jQuery(t).attr("href")))).appendTo(this.cache.thumbs)},resizeContent:function(){var t=this;this.lightbox.content.width(jQuery(e).width()*this.lightbox.content.children().length).height(this.cache.thumbs?jQuery(e).height()-this.lightbox.thumbs.height():jQuery(e).height()).children().width(jQuery(e).width()-2*this.options.content.spacing).height(this.lightbox.content.height()),this.lightbox.content.children().each(function(i){jQuery(this).css("left",jQuery(e).width()*i+t.options.content.spacing)})},open:function(t,n){this.cache.thumbs&&!1!==this.options.thumbs&&(this.lightbox.thumbs.width((this.options.thumbs.size+this.options.thumbs.spacing)*this.cache.thumbs.children().length).height(this.options.thumbs.size+2*this.options.thumbs.spacing).html(this.cache.thumbs.clone(!0).html()).show().children().width(this.options.thumbs.size).height(this.options.thumbs.size).css("margin",this.options.thumbs.spacing+"px "+this.options.thumbs.spacing/2+"px"),this.registerEvents("thumbs"),this.lightbox.next.show(),this.lightbox.prev.show()),this.lightbox.content.html(this.cache.content.clone(!0).html()),this.lightbox.content.children().length>1&&1==this.options.loop&&(this.phantoms={left:jQuery(this.lightbox.content.children().get(this.lightbox.content.children().length-1)).clone().addClass(s+"phantom-left").prependTo(this.lightbox.content),right:jQuery(this.lightbox.content.children().get(1)).clone().addClass(s+"phantom-right").appendTo(this.lightbox.content)}),this.resizeContent(),this.change(t,this.Obj.index(n)),this.registerEvents("lightbox"),this.lightbox.container.toggleClass(this.options.lightboxCloseClass+" "+this.options.lightboxOpenClass).fadeIn(this.options.delay),e.addEventListener&&e.addEventListener("DOMMouseScroll",r,!1),e.onwheel=r,e.onmousewheel=i.onmousewheel=r,e.ontouchmove=r,i.onkeydown=l},close:function(t){var n=this;this.deregisterEvents(),this.lightbox.container.toggleClass(this.options.lightboxCloseClass+" "+this.options.lightboxOpenClass).fadeOut(this.options.delay,function(){n.lightbox.container.attr("style",""),n.lightbox.content.html("").attr("style",""),n.lightbox.thumbs.html("").attr("style","").hide(),n.lightbox.next.hide(),n.lightbox.prev.hide(),n.index=!1,e.removeEventListener&&e.removeEventListener("DOMMouseScroll",r,!1),e.onmousewheel=i.onmousewheel=null,e.onwheel=null,e.ontouchmove=null,i.onkeydown=null})},change:function(t,i){var n=this,o="number"==typeof i?i:jQuery(i).index();if(this.lightbox.content.children().length>1){var h=!0===this.options.loop?jQuery(e).width()*-(o+1):jQuery(e).width()*-o;if(this.lightbox.content.css({"-webkit-transform":"translate("+h+"px,0)","-moz-transform":"translate("+h+"px,0)","-ms-transform":"translate("+h+"px,0)","-o-transform":"translate("+h+"px,0)",transform:"translate("+h+"px,0)",transition:this.options.delay+"ms transform"}),-1==o?(o=this.lightbox.content.children().length-3,setTimeout(function(){var t=jQuery(e).width()*-(o+1);n.lightbox.content.css({"-webkit-transform":"translate("+t+"px,0)","-moz-transform":"translate("+t+"px,0)","-ms-transform":"translate("+t+"px,0)","-o-transform":"translate("+t+"px,0)",transform:"translate("+t+"px,0)",transition:"none"})},this.options.delay)):o==this.lightbox.content.children().length-2?(o=0,setTimeout(function(){var t=jQuery(e).width()*-(o+1);n.lightbox.content.css({"-webkit-transform":"translate("+t+"px,0)","-moz-transform":"translate("+t+"px,0)","-ms-transform":"translate("+t+"px,0)","-o-transform":"translate("+t+"px,0)",transform:"translate("+t+"px,0)",transition:"none"})},this.options.delay)):setTimeout(function(){n.lightbox.content.css("transition","none")},this.options.delay),this.lightbox.content.children().removeClass(s+"active"),jQuery(this.lightbox.content.children().get(o+1)).addClass(s+"active"),this.lightbox.thumbs.children().removeClass(s+"active"),jQuery(this.lightbox.thumbs.children().get(o)).addClass(s+"active"),this.lightbox.thumbs.width()>jQuery(e).width()){h=-o*(this.options.thumbs.size+this.options.thumbs.spacing)-(this.options.thumbs.size+this.options.thumbs.spacing)/2;this.lightbox.thumbs.css({"-webkit-transform":"translate("+h+"px,0)","-moz-transform":"translate("+h+"px,0)","-ms-transform":"translate("+h+"px,0)","-o-transform":"translate("+h+"px,0)",transform:"translate("+h+"px,0)",transition:this.options.delay+"ms transform"})}}this.index=o},next:function(t){this.change(t,this.index+1)},prev:function(t){this.change(t,this.index-1)},startTouch:function(t,e){t.preventDefault(),this.touch={start:a(t),target:{x:parseFloat(e.css("transform").split(",")[4]),y:parseFloat(e.css("transform").split(",")[5])}}},endTouch:function(t,i){var n=this;t.preventDefault();var o=a(t).clientX-this.touch.start.clientX,s=a(t).clientY-this.touch.start.clientY;a(t).pageX,this.touch.start.pageX,a(t).pageY,this.touch.start.pageY,a(t).timestamp,this.touch.start.timestamp;i==this.lightbox.content&&((o>0?o:-o)>jQuery(e).width()*this.options.swipe.horizontalOffset?o>0?this.prev(t):this.next(t):(this.lightbox.content.css({"-webkit-transform":"translate("+this.touch.target.x+"px,0)","-moz-transform":"translate("+this.touch.target.x+"px,0)","-ms-transform":"translate("+this.touch.target.x+"px,0)","-o-transform":"translate("+this.touch.target.x+"px,0)",transform:"translate("+this.touch.target.x+"px,0)",transition:this.options.delay+"ms transform"}),setTimeout(function(){n.lightbox.content.css("transition","none")},this.options.delay)),(s>0?s:-s)>jQuery(e).height()*this.options.swipe.verticalOffset?this.close(t):(this.lightbox.container.css({"-webkit-transform":"translate(0,0) scale(1)","-moz-transform":"translate(0,0) scale(1)","-ms-transform":"translate(0,0) scale(1)","-o-transform":"translate(0,0) scale(1)",transform:"translate(0,0) scale(1)",opacity:"1",transition:this.options.delay+"ms all"}),setTimeout(function(){n.lightbox.container.attr("style","display: block;")},this.options.delay)))},moveTouch:function(t,i){t.preventDefault();var n=a(t).clientX-this.touch.start.clientX,o=a(t).clientY-this.touch.start.clientY;a(t).pageX,this.touch.start.pageX,a(t).pageY,this.touch.start.pageY,a(t).timestamp,this.touch.start.timestamp;if(i==this.lightbox.content&&(n>0?n:-n)>10){var s=this.touch.target.x+n;i.css({"-webkit-transform":"translate("+s+"px,0)","-moz-transform":"translate("+s+"px,0)","-ms-transform":"translate("+s+"px,0)","-o-transform":"translate("+s+"px,0)",transform:"translate("+s+"px,0)"})}if(i==this.lightbox.content&&(o>0?o:-o)>30){var h=0+o,r=(jQuery(e).height()-(o>0?o:-o))/jQuery(e).height();this.lightbox.container.css({"-webkit-transform":"translate(0,"+h+"px) scale("+r+")","-moz-transform":"translate(0,"+h+"px) scale("+r+")","-ms-transform":"translate(0,"+h+"px) scale("+r+")","-o-transform":"translate(0,"+h+"px) scale("+r+")",transform:"translate(0,"+h+"px) scale("+r+")",opacity:r})}},registerEvents:function(t){var i=this;"init"==t&&this.Obj.each(function(){jQuery(this).on("click",function(t){t.preventDefault(),i.open.call(i,t,this)})}),"lightbox"==t&&(this.lightbox.close.on("click",function(t){i.close.call(i,t)}),this.lightbox.next.on("click",function(t){i.next.call(i,t)}),this.lightbox.prev.on("click",function(t){i.prev.call(i,t)}),jQuery(e).on("resize",function(t){i.resizeContent.call(i,t)}),this.lightbox.content.on("touchstart",function(t){i.startTouch.call(i,t,i.lightbox.content)}),this.lightbox.content.on("touchend",function(t){i.endTouch.call(i,t,i.lightbox.content)}),this.lightbox.content.on("touchmove",function(t){i.moveTouch.call(i,t,i.lightbox.content)})),"thumbs"==t&&(this.lightbox.thumbs.children().on("click",function(t){i.change.call(i,t,this)}),this.lightbox.thumbs.children().on("touchend",function(t){i.change.call(i,t,this)}),this.lightbox.thumbs.on("touchstart",function(t){i.startTouch.call(i,t,i.lightbox.thumbs)}),this.lightbox.thumbs.on("touchend",function(t){i.endTouch.call(i,t,i.lightbox.thumbs)}),this.lightbox.thumbs.on("touchmove",function(t){i.moveTouch.call(i,t,i.lightbox.thumbs)}))},deregisterEvents:function(){this.lightbox.close.off(),this.lightbox.next.off(),this.lightbox.prev.off(),jQuery(e).off("resize"),this.lightbox.content.off(),this.lightbox.thumbs.children().off(),this.lightbox.thumbs.off()}}),t.fn.indexof=function(t){for(var e,i=0;i<jQuery(this).length;i++)jQuery(this).get(i)==t&&(e=i);return e},t.fn.lightboxed=function(e){var i=function(){t.data(this,"plugin_"+o)||t.data(this,"plugin_"+o,new h(jQuery(this),e))},n={};return jQuery(this).filter("[rel]").each(function(){var t=jQuery(this).attr("rel");n.hasOwnProperty(t)?n[t].push(this):n[t]=[this]}),jQuery.each(n,i),jQuery.each(jQuery(this).filter(":not([rel])"),i),this},t.fn.indexOf=function(t){var e=!1,i=jQuery(t)[0].outerHTML;return jQuery(this).each(function(t,n){if(jQuery(this)[0].outerHTML==i)return e=t,!1}),e},t.fn.lightboxed.defaults={lightboxOpenClass:s+"lightbox_open",lightboxCloseClass:s+"lightbox_close",delay:500,loop:!0,thumbs:{size:50,spacing:10},content:{spacing:10},swipe:{horizontalOffset:.2,verticalOffset:.33}}}(jQuery,window,document),jQuery(window).on("load",function(){jQuery(".lightboxed").lightboxed()});